<UserControl x:Class="Library.TableControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Library"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid>

        <HeaderedItemsControl ItemsSource="{Binding TempList}" >
            <HeaderedItemsControl.Template>
                <ControlTemplate TargetType="HeaderedItemsControl">

                    <Border>

                        <ScrollViewer HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden">

                            <StackPanel>

                                <ContentPresenter ContentSource="Header" />

                                <ItemsPresenter />

                            </StackPanel>
                            
                        </ScrollViewer>

                    </Border>
                    
                </ControlTemplate>
            </HeaderedItemsControl.Template>
            <HeaderedItemsControl.HeaderTemplate>
                <DataTemplate>
                        <Border Background="#FFFFFF">
                        <Border.Effect>
                            <DropShadowEffect BlurRadius="9"
                                              ShadowDepth="1"
                                              Opacity="0.2"
                                />
          
                        </Border.Effect>

                        <Grid Height="50">

                            <Grid.ColumnDefinitions>

                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />

                            </Grid.ColumnDefinitions>


                            <!-- First button -->
                            <local:ButtonWithIcon Grid.Column="0"
                                                  Content="Personnummer"
                                                  IconContent="&#xf0dd;"
                                                  Style="{StaticResource TableHeaderButton}"
                                                  
                                                  Background="{Binding DataContext.TableToSort, 
                                                               RelativeSource={RelativeSource AncestorType=HeaderedItemsControl},
                                                               Converter={local:StateToStyleConverter},
                                                               ConverterParameter=PNumber}"
                                                                                                    
                                                  Command="{Binding DataContext.Sort, 
                                                            RelativeSource={RelativeSource AncestorType=HeaderedItemsControl}}"
                                                  
                                                  CommandParameter="PNumber"
                                                  
                                                  />

                            <!-- Second button -->
                            <local:ButtonWithIcon Grid.Column="1"
                                                  Content="Förnamn"
                                                  IconContent="&#xf0dd;"
                                                  Style="{StaticResource TableHeaderButton}"
                                                  Background="{Binding DataContext.TableToSort, 
                                                               RelativeSource={RelativeSource AncestorType=HeaderedItemsControl},
                                                               Converter={local:StateToStyleConverter},
                                                               ConverterParameter=FName}"
                                                                                                    
                                                  Command="{Binding DataContext.Sort, 
                                                            RelativeSource={RelativeSource AncestorType=HeaderedItemsControl}}"
                                                  
                                                  CommandParameter="FName"    
                                                  />

                            <!-- Third button -->
                            <local:ButtonWithIcon Grid.Column="2"
                                                  Content="Efternamn"
                                                  IconContent="&#xf0dd;"
                                                  Style="{StaticResource TableHeaderButton}"
                                                 
                                                  Background="{Binding DataContext.TableToSort, 
                                                               RelativeSource={RelativeSource AncestorType=HeaderedItemsControl},
                                                               Converter={local:StateToStyleConverter},
                                                               ConverterParameter=LName}"
                                                                                                    
                                                  Command="{Binding DataContext.Sort, 
                                                            RelativeSource={RelativeSource AncestorType=HeaderedItemsControl}}"
                                                  
                                                  CommandParameter="LName" 
                                                  
                                                  />

                            <!-- Fourth button -->
                            <local:ButtonWithIcon Grid.Column="3"
                                                  Content="Lånade böcker"
                                                  IconContent="&#xf0dd;"
                                                  Style="{StaticResource TableHeaderButton}"
                                                 
                                                  Background="{Binding DataContext.TableToSort, 
                                                               RelativeSource={RelativeSource AncestorType=HeaderedItemsControl},
                                                               Converter={local:StateToStyleConverter},
                                                               ConverterParameter=LArticles}"
                                                                                                    
                                                  Command="{Binding DataContext.Sort, 
                                                            RelativeSource={RelativeSource AncestorType=HeaderedItemsControl}}"
                                                  
                                                  CommandParameter="LArticles" 
                                                  
                                                  />

                            <!-- Fifth button -->
                            <local:ButtonWithIcon Grid.Column="4"
                                                  Content="Reserverade böcker"
                                                  IconContent="&#xf0dd;"
                                                  Style="{StaticResource TableHeaderButton}"
                                                 
                                                  Background="{Binding DataContext.TableToSort, 
                                                               RelativeSource={RelativeSource AncestorType=HeaderedItemsControl},
                                                               Converter={local:StateToStyleConverter},
                                                               ConverterParameter=RArticles}"
                                                                                                    
                                                  Command="{Binding DataContext.Sort, 
                                                            RelativeSource={RelativeSource AncestorType=HeaderedItemsControl}}"
                                                  
                                                  CommandParameter="RArticles" 
                                                  
                                                  />

                        </Grid>
                        
                    </Border>
                </DataTemplate>
            </HeaderedItemsControl.HeaderTemplate>

            <HeaderedItemsControl.ItemTemplate>
                <DataTemplate>
                    <Border BorderBrush="{StaticResource CustomLightGreyBrush}"
                            BorderThickness="0 0 0 1"
                            Padding="0 20"
                            Background="White"
                            >

                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>

                            <TextBlock Grid.Column="0"
                                   Text="{Binding personalNumber}"
                                   VerticalAlignment="Center" HorizontalAlignment="Center" 
                                   Style="{StaticResource TableItemText}"
                                   />

                            <TextBlock Grid.Column="1"
                                       Text="{Binding firstName}"
                                       VerticalAlignment="Center" HorizontalAlignment="Center"
                                       Style="{StaticResource TableItemText}"
                                       />


                            <TextBlock Grid.Column="2"
                                       Text="{Binding lastName}"
                                       VerticalAlignment="Center" HorizontalAlignment="Center"
                                       Style="{StaticResource TableItemText}"
                                       />


                            <TextBlock Grid.Column="3"
                                       Text="{Binding loanedBooks}"
                                       VerticalAlignment="Center" HorizontalAlignment="Center"
                                       Style="{StaticResource TableItemText}"
                                       />


                            <TextBlock Grid.Column="4"
                                       Text="{Binding reservedBooks}"
                                       VerticalAlignment="Center" HorizontalAlignment="Center"
                                       Style="{StaticResource TableItemText}"
                                       />



                        </Grid>
                    </Border>
                    
                </DataTemplate>
            </HeaderedItemsControl.ItemTemplate>
        </HeaderedItemsControl>
        
    </Grid>
</UserControl>
